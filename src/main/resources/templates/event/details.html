<!DOCTYPE html>

<html>
<head>
    <meta content ="text/html" charset="UTF-8"/>
    <meta description="viewport" content="width=device-width, initial-scale=1"/>

    <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
    <link rel="stylesheet" th:href="@{/assets/css/normalize.css}"/>
    <link rel="stylesheet" th:href="@{/assets/css/main.css}"/>
    <link rel="stylesheet" th:href="@{/assets/css/articles.css}"/>

    <title>Nörd | Nemendafélag</title>
</head>
<body>
<header th:replace="layout :: header"></header>
<div th:replace="ad/ad :: ads"></div>

<main>
    <div id="articles">

        <article class="article" th:each="news : ${news}">
            <div id="title">
                <h2 th:text="${news.title}"></h2>
            </div>

            <div id="address">
                <p id="street" th:text="${news.location}"></p>
                <p id="zip" th:text="${news.location}"></p>
            </div>
            <div id="mapsLink">
                <a id="maps" th:href="@{${news.linkLocation}}" th:text="${news.linkLocation}"></a>
            </div>
            <div id="eventTime">
                <div id="weekday">
                    <p th:text="${#temporals.dayOfWeekName(news.timeOfEvent)}"></p>
                </div>
                <div id="date">
                    <p id="dayOfMonth" th:text="${#temporals.format(news.timeOfEvent, 'dd')}"></p>
                    <p id="month" th:text="${#temporals.monthName(news.timeOfEvent)}"></p>
                </div>
                <div id="time">
                    <p class="startTime" th:text="${#temporals.format(news.timeOfEvent, 'HH:mm')}"></p>
                </div>
            </div>
            <div id="countDown">
                <p class="countDownTimer">niðurteljari</p>
            </div>
            <!-- If the user is authenticated -->
            <div id="registrationBtn" th:if="${#authorization.expression('isAuthenticated()')}">
                <!-- Make conditions based on whether the authenticated user is registered for the event -->
                <div th:switch="${registrationService.isRegisteredForEvent(news, user)}">
                    <div th:case="${false}">
                        <form th:action="@{/register}" method="post">
                            <input name="eventId" type="hidden" th:value="${news.id}" />
                            <input name="isRegistered" type="hidden" th:value="${true}" />
                            <button class="registerButton" type="submit" disabled="disabled">Skrá mig</button>
                        </form>
                    </div>
                    <div th:case="${true}">
                        <form th:action="@{/unregister}" method="post">
                            <input name="newsId" type="hidden" th:value="${news.id}" />
                            <button class="unregisterButton" type="submit">Afskrá mig</button>
                        </form>
                    </div>
                </div>
            </div>
            <div id="capacityInfo">
                <p id="capacity" th:text="${news.capacity + ' sæti'}"></p>
                <p th:if="${news.isPriorityEvent} == true">Forgangsviðburður</p>
            </div>
            <div id="registrationStarts">
                <p>Skráning hefst:</p>
                <p id="startOfReg" th:text="${#temporals.format(news.registrationOpens, 'dd/MM/yyyy HH:mm')}"></p>
                <p class="registrationOpens" th:text="${#temporals.format(news.registrationOpens, 'dd:MM:yyyy:HH:mm')}"></p>
            </div>
            <div id="closeReg">
                <p>Skráningu lýkur:</p>
                <p id="endOfReg" th:text="${#temporals.format(news.registrationCloses, 'dd/MM/yyyy HH:mm')}"></p>
                <p class="registrationCloses" th:text="${#temporals.format(news.registrationCloses, 'dd:MM:yyyy:HH:mm')}"></p>
            </div>
            <div id="publishInfo">
                <p id="published" th:text="${'Birt ' + #temporals.format(news.datePosted, 'dd/MM') + ' - ' + news.author}"></p>
            </div>


            <div class="countdown">
                <p id="countdownText">Skráning</p>
                <p class="registrationOpens" th:text="${#temporals.format(news.registrationOpens, 'dd:MM:yyyy:HH:mm')}"></p>
                <p class="registrationCloses" th:text="${#temporals.format(news.registrationCloses, 'dd:MM:yyyy:HH:mm')}"></p>
                <p class="timer">
                    <span class="timerInt days"></span>
                    <span class="timerString">daga</span>
                    <span class="timerInt hours"></span>
                    <span class="timerString">klst</span>
                    <span class="timerInt minutes"></span>
                    <span class="timerString">mín</span>
                    <span class="timerInt seconds"></span>
                    <span class="timerString">sek</span>
                </p>
            </div>

        </article>
    </div>
</main>
    <!-- Only admins are autorized to make new news items and events
    <div class="new-items">
        <a sec:authorize="hasRole('ROLE_ADMIN')" href="/news/add">Búa til frétt</a>
        <a sec:authorize="hasRole('ROLE_ADMIN')" href="/event/add">Búa til viðburð</a>
        <a sec:authorize="hasRole('ROLE_ADMIN')" href="/user/add">Bæta við notanda</a>
        <a sec:authorize="hasAnyRole('ROLE_ADMIN, ROLE_USER')" href="/user/userList">Listi yfir notendur</a>
        <a sec:authorize="hasRole('ROLE_ADMIN')" href="/ad/add">Bæta við auglýsingu</a>
        <a sec:authorize="hasRole('ROLE_ADMIN')" href="/infoNord/add">Bæta við upplýsingum um Nörd</a>
        <a sec:authorize="hasRole('ROLE_ADMIN')" href="/infoBoard/add">Bæta við upplýsingum um stjórn/miðstjórn</a>
    </div>
    -->

    <!-- For each news item -->
    <!--<h1>Fréttir og viðburðir</h1>-->
    <!--
        <div th:each="news : ${news}" class="news-item">
        <h4>Birt þann: <strong th:text="${#temporals.format(news.datePosted, 'dd/MM/yyyy HH:mm')}"></strong></h4>
        <h4 th:text="${'Birt af: '  + news.author}"></h4>

        <div>
            <h1 th:text="${news.title}"></h1>
            <a th:text="${news.description}"></a>
            -->
    <!-- If the news item is an event -->
    <!--   <div th:if="${news instanceof T(is.nord.model.Event)}">
           <h4 th:text="${'Gestgjafi: ' + news.host}"></h4>
           <h4 th:text="${'Staðsetning: ' + news.location}"></h4>
           <h4>Já.is/Google maps: <a th:href="@{${news.linkLocation}}" th:text="${news.linkLocation}"></a></h4>
           <h4 th:text="${'Fjöldi sæta: ' + news.capacity}"></h4>

           <h4 th:if="${news.isPriorityEvent} == true">Forgangsviðburður: Já</h4>
           <h4 th:if="${news.isPriorityEvent} == false">Forgangsviðburður: Nei</h4>

           <h4>Viðburður hefst: <strong th:text="${#temporals.format(news.timeOfEvent, 'dd/MM/yyyy HH:mm')}"></strong></h4>
           <h4>Skráning hefst: <strong th:text="${#temporals.format(news.registrationOpens, 'dd/MM/yyyy HH:mm')}"></strong></h4>
           <h4>Skráningu lýkur: <strong th:text="${#temporals.format(news.registrationCloses, 'dd/MM/yyyy HH:mm')}"></strong></h4>
-->
    <!-- If the user is authenticated -->
    <!--    <div th:if="${#authorization.expression('isAuthenticated()')}">-->
    <!-- Print out the list of registrations for each event-->
    <!--<h2>Skráningar:</h2>
    <div th:each="registration : ${registrationService.findRegistrationsByEvent(news)}">
        <h4 th:text="${registration.user.username}"></h4>
        <label sec:authorize="hasRole('ROLE_ADMIN')" th:for="${#ids.next('confirmed')}">Mættur?</label>
        <input sec:authorize="hasRole('ROLE_ADMIN')" type="checkbox" name="confirmed"/>
    </div>-->
    <!-- Make conditions based on whether the authenticated user is registered for the event-->
    <!--<div th:switch="${registrationService.isRegisteredForEvent(news, user)}">
        <div th:case="${false}">
            <form th:action="@{/register}" method="post">
                <input name="eventId" type="hidden" th:value="${news.id}" />
                <input name="isRegistered" type="hidden" th:value="${true}" />
                <button type="submit">Skrá mig</button>
            </form>
        </div>
        <div th:case="${true}">
            <form th:action="@{/unregister}" method="post">
                <input name="newsId" type="hidden" th:value="${news.id}" />
                <button type="submit">Afskrá mig</button>
            </form>
        </div>
    </div>
</div>
</div>-->
    <!-- Make conditions based on whether the news item is news or event, and check for admin priveleges-->
    <!--<div th:switch="${news instanceof T(is.nord.model.Event)}">
        <div th:case="${false}">
            <a sec:authorize="hasRole('ROLE_ADMIN')" th:href="@{|/news/${news.id}/edit|}">Breyta</a>
            <a sec:authorize="hasRole('ROLE_ADMIN')" th:href="@{|/news/${news.id}/delete|}">Eyða</a>
        </div>
        <div th:case="${true}">
            <a sec:authorize="hasRole('ROLE_ADMIN')" th:href="@{|/event/${news.id}/edit|}">Breyta</a>
            <a sec:authorize="hasRole('ROLE_ADMIN')" th:href="@{|/event/${news.id}/delete|}">Eyða</a>
        </div>
    </div>
</div>
</div>
-->
    <!--
    <h2>Bannlisti:</h2>
<div th:each="eventBan : ${eventBanService.findAllBanned()}">
    <h4 th:text="${eventBan.user.username}"></h4>
</div>
<h2>Topp vísindamenn:</h2>
<div th:each="topUser : ${userService.findAllOrderedByPoints()}">
    <h4 th:text="${topUser.username} + ' - ' + ${topUser.points}"></h4>
</div>
-->


<footer th:replace="layout :: footer"></footer>

<div th:replace="layout :: scripts"></div>




</body>

</html>